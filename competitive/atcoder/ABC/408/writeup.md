# AtCoder ABC 407 C - Not All Covered

## 問題概要

AtCoder 王国には **N 個の城壁** があり、1 から N まで番号が振られています。  
また **M 個の砲台** があり、砲台 i は `[Li, Ri]` の区間を守ります。  

砲台を破壊すると、その砲台が守っていた区間は守られなくなります。  
**どの砲台にも守られていない城壁が存在する状態** にするために、最小で何個の砲台を破壊する必要があるかを求めます。

---

## 制約
- 1 ≤ N ≤ 1,000,000  
- 1 ≤ M ≤ 200,000  
- 1 ≤ Li ≤ Ri ≤ N  

---

## 解法の発想

### 1. 素朴な方法（TLE）
各砲台ごとに守っている `[Li, Ri]` の範囲を全て数えると **O(N * M)** となり、最大で `10^12` 程度の計算量になり、間に合いません。

### 2. imos 法を使う
範囲のカウントには **imos 法** を使います。

- 区間 `[L, R]` を守る砲台がある場合、  
  - `imos[L] += 1`  
  - `imos[R+1] -= 1`  
- 最後に累積和を取ることで、各位置が「何個の砲台に守られているか」がわかります。

これにより計算量は **O(N + M)** になり十分高速です。

### 3. 答えの導出
- 各城壁が「守られている砲台の数」を数える  
- その最小値 `min_cover` を求める  
- **どの砲台にも守られていない城壁を作るためには、`min_cover` 個の砲台を壊せばよい**  
  （なぜなら、最もカバー数の少ない城壁に注目し、そこを完全に無防備にすれば条件を満たすため）

---


## 関連アルゴリズム

- imos法
