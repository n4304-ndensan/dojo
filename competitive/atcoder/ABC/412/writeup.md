# C: Giant Domino

## 問題情報

**Description:**

1 から N まで番号の付いた N 個のドミノがある。各ドミノ i の大きさは Si で表される。
ドミノを 1 から N の間で選び並べるとき、次の条件を満たせば左のドミノから右のドミノへと倒すことができる：

- 右側のドミノの大きさが左側の **2 倍以下** であること。

このとき、**1 番から N 番までをつなぐ最小のドミノの個数**を求めよ。
ただし、条件を満たす並べ方が存在しない場合は -1 を出力せよ。

---

## 解法

### アルゴリズム概要

1. 入力を受け取る。
2. もし `first * 2 >= last` なら、最初と最後の 2 個だけで倒せるので答えは `2`。
3. `first` 以下、または `last` 以上のドミノを除外して中間の候補を作成する。
4. 中間の候補を昇順にソートする。
5. 隣接する要素について、`ns[i] * 2 < ns[i+1]` が存在すれば、連鎖が途切れるので答えは `-1`。
6. そうでなければ、貪欲法により「できるだけ少ない個数」で繋がるドミノ列を構築する。

   - 具体的には、直前のドミノの 2 倍未満で収まらないときに、1 つ前のドミノを採用してカウントを増やす。

7. 最終的な個数を出力する。

---

## 実装のポイント

- **早期リターン**を積極的に利用して無駄な計算を省く。
  例：`first * 2 >= last` や、隣接要素で成立しないケースの検出。
- **ソート後の隣接チェック**は `windows(2)` を用いると安全で読みやすい。
- 計算量を意識して、必要最小限の処理のみに絞る。

---

## 計算量

- ソート部分が支配的なので、計算量は

  $$
  O(\Sigma N \log \Sigma N)
  $$

- 制約より $\Sigma N \leq 2 \times 10^5$。
  よって最悪でも **約 3.5 × 10^6** ステップ程度であり、2 秒以内に十分収まる。

---

## 関連技術

- 貪欲法（Greedy）
- ソート
- 早期リターンによる枝刈り
