#理論分野 #アルゴリズム #AtCoder #ABC430

# **ABC430 - Writeup**

---

## **A - Candy Cookie Law**

### 問題概要

AtCoder 国の法律：

> 「飴を A 個以上持つ者はクッキーを B 個以上持たねばならない。」

高橋君の所持数が $(C, D)$ のとき、この法律に違反しているかを判定する。

---

### 条件整理

- 違反となるのは次の条件を同時に満たすとき：
  $$
   C \ge A \quad \text{かつ} \quad D < B
  $$
- それ以外は「No」（違反していない）。

---

### ポイント

- 条件を素直に書くことで、誤りを防げる。
- `if a > c {}` のような不自然な比較ではなく、**「違反条件を直接表現」**するのが読みやすい。

---

## **B - Count Subgrid**

### 問題概要

- $N \times N$ のグリッド（各マスは `#` または `.`）。
- 縦横 $M$ の部分正方形を取り出す。
- 得られる塗り方の **異なる種類数** を求める。

---

### 制約

$$
1 \le M \le N \le 10
$$

→ brute-force（全探索）で十分。

---

### アプローチ

- すべての左上角 $(i, j)$ を起点に、サイズ $M \times M$ の小領域を取り出す。
- 各領域を文字列化（もしくはビット表現）し、`HashSet` に格納。
- 重複しないパターン数 = 集合の大きさ。

---

### ポイント

- $N \le 10$ なので、全領域探索 $O(N^2 M^2)$ でも余裕。
- `HashSet` に格納することで重複を自動的に排除できる。
- 連結文字列やビットパターンに変換することで、ハッシュ化が容易。

---

## **C - Truck Driver（再掲）**

### 問題概要

> 「トラック運転手は A 分以上運転する際には、B 分以上の休憩を取らなければならない。」

長さ N の文字列 $S$（`a`: 運転、`b`: 休憩）が与えられる。
次の条件を満たす区間 $(l, r)$ の個数を求める：

- 区間中の `a` の個数 $\ge A$
- 区間中の `b` の個数 $< B$

---

### 制約

$$
1 \le N \le 3\times10^5
$$

→ 線形または $O(N \log N)$ のアルゴリズムが必要。

---

### 解法概要

1. `a_sum[i]`, `b_sum[i]` を累積和として構築。
2. 各左端 `l` に対し：

   - `a_sum[r] - a_sum[l] >= A` を満たす最小の右端 `r_a` を二分探索。
   - `b_sum[r] - b_sum[l] >= B` を満たす最小の右端 `r_b` を二分探索。
   - 条件を満たす区間数 = `r_b - r_a`。

---

### 考察

- 区間の条件が「単調性」を持つため、二分探索で境界を求められる。
- 累積和との組み合わせにより $O(N \log N)$ に圧縮できる。
- 2 ポインタでも同様の考え方が可能（$O(N)$）。

---
