#競技プログラミング #AtCoder #ABC431

# AtCoder Beginner Contest 431 Writeup  

---

## A - Robot Balance

### 問題概要
高橋くんは、頭パーツの重さ $H$、体パーツの重さ $B$ を持っている。  
ロボットが倒れないためには「頭パーツの重さ $\leq$ 体パーツの重さ」である必要がある。  
倒れないようにするために、体パーツをあと何グラム重くすべきか求める。

### 解法設計
ロボットが倒れない条件は $B \geq H$ である。したがって、必要な追加重量は $\max(0, H - B)$ となる。

### 計算量評価

* 時間計算量: $O(1)$
* 空間計算量: $O(1)$

---

## B - Robot Weight

### 問題概要

重さ $X$ のロボットに、$N$ 種類の部品（それぞれの重さ $W_i$）を取り付けたり外したりする操作が $Q$ 回与えられる。
各操作のたびに現在のロボットの重さを出力する。

### 解法設計

* 各部品の取り付け状態を boolean 配列で管理する。
* クエリ $P_i$ ごとに装着／取り外しをトグルし、重さを更新して出力する。

### 計算量評価

* 時間計算量: $O(Q)$
* 空間計算量: $O(N)$

---

## C - Robot Factory

### 問題概要

頭パーツ $N$ 個、体パーツ $M$ 個があり、それぞれ重さが配列 $H, B$ で与えられる。
倒れないロボット（頭 $\leq$ 体）を $K$ 体作れるか判定する。

---

### 初期アプローチ（TLE原因）

初期実装では、貪欲に組み合わせを作る際に次のような方針を取った。

1. 頭パーツ $H$ を昇順または降順でソート。
2. 各頭パーツに対して、条件を満たす体パーツを `Vec::remove()` で削除しながら対応づける。

Rustの `Vec::remove(index)` は内部で **要素のシフト操作（$O(N)$）** を行うため、
全体の計算量は最悪で $O(NM)$ に近くなる。

例えば、$N = M = 2 \times 10^5$ の場合、
削除操作を伴う内側ループで $10^{10}$ オーダーの操作が発生し、TLEとなる。

---

### 改善アプローチ（二重ポインタ法）

`remove` を使わず、**降順ソート + 二重ポインタ法** を採用することで、全探索を $O(N+M)$ で実現できる。

* $H$ と $B$ を降順ソート。
* ポインタをそれぞれ進めながら、対応可能なペアを貪欲に構築。

### ポイント

* `remove` のような線形削除操作は避ける。
* ソート＋二重ポインタにより **全要素を一度ずつ見るだけ** にする。

---

### 計算量評価

| 処理            | 計算量                 |
| ------------- | ------------------- |
| ソート           | $O((N+M)\log(N+M))$ |
| マッチング（二重ポインタ） | $O(N+M)$            |
| 合計            | $O((N+M)\log(N+M))$ |

---

### 要約表

| 項目   | 内容                           |
| ---- | ---------------------------- |
| 分類   | 貪欲法 + ソート                    |
| 初期誤り | `Vec::remove()` による線形削除で TLE |
| 改善手法 | 二重ポインタ法による線形走査               |
| 計算量  | $O((N+M)\log(N+M))$          |

---

## 総括

| 問題 | 分類       | 主要アルゴリズム   | 計算量                 | 注意点              |
| -- | -------- | ---------- | ------------------- | ---------------- |
| A  | 条件分岐     | 比較演算       | $O(1)$              | 単純比較             |
| B  | シミュレーション | 状態トグル管理    | $O(Q)$              | 状態管理を明示的に行う      |
| C  | 貪欲法      | ソート＋二重ポインタ | $O((N+M)\log(N+M))$ | `remove` はTLEの原因 |
