`top` コマンドは、Linuxカーネルのスケジューラやメモリ管理、プロセス管理機構と連携して、リアルタイムにCPUやメモリの利用状況、各プロセスの状態を監視するツールである。

---

## コマンド構文

```bash
top [オプション]
```

### 主なオプション

| オプション      | 説明                          |
| ---------- | --------------------------- |
| `-d <秒>`   | 更新間隔を指定する                   |
| `-n <回数>`  | 指定回数分の更新後に終了                |
| `-b`       | バッチモード（非対話）                 |
| `-o <項目>`  | 指定項目でソート（例: `%CPU`, `%MEM`） |
| `-p <PID>` | 指定PIDのみ監視                   |
| `-H`       | スレッド単位で表示                   |
| `-u <ユーザ>` | 指定ユーザのプロセスのみ表示              |
| `-1`       | CPUコアごとの使用率を表示              |

---

## 全列項目対応表（英語 / 日本語訳 / 関連OS機能）

|Column|日本語訳|関連OS機能|説明|
|---|---|---|---|
|PID|プロセスID|[[OS_プロセス管理.md]]|カーネルが割り当てる一意の識別子|
|PPID|親プロセスID|[[OS_プロセス管理.md]]|親子関係の確認に使用|
|USER / UID|実効ユーザ名 / ID|[[OS_権限管理.md]]|実行権限とファイルアクセス制御に関係|
|RUSER / RUID / SUSER / SUID|実ユーザ / 保存ユーザ|[[OS_権限管理.md]]|su / sudo 実行時の権限判定に使用|
|GID / GROUP|グループID / グループ名|[[OS_権限管理.md]]|アクセス制御やプロセスグループ管理に関係|
|PGRP / SID / TPGID / TTY|プロセスグループ / セッションID / 端末|[[OS_セッション管理.md]]|制御端末やフォアグラウンド制御関連|
|PR / NI|優先度 / nice値|[[OS_スケジューラ.md]]|CPUスケジューリング制御。低いほど優先度高い|
|P|最終使用CPU|[[OS_スケジューラ.md]]|マルチコア環境でのCPU割り当て確認に使用|
|nTH|スレッド数|[[OS_スケジューラ.md]]|マルチスレッド化の度合いを示す|
|TGID|スレッドグループID|[[OS_スケジューラ.md]]|pthread単位の識別|
|FLAGS|タスクフラグ|[[OS_スケジューラ.md]]|`<sched.h>`で定義されるプロセス属性フラグ|
|WCHAN|待機関数名|[[OS_スケジューラ.md]]|プロセスがスリープ中のカーネル関数|
|%CPU / %CUU / %CUC|CPU使用率 / CPU利用率(子含む)|[[OS_スケジューラ.md]]|スケジューラ基準のCPU利用時間比率|
|TIME / TIME+|CPU使用時間|[[OS_スケジューラ.md]]|累積CPU時間（+は1/100秒単位）|
|ELAPSED / STARTED|経過時間 / 起動時刻|[[OS_プロセス管理.md]]|稼働時間と起動タイミング|
|VIRT / RES / SHR|仮想/実/共有メモリ|[[OS_メモリ管理.md]]|仮想アドレス空間・物理常駐・共有領域|
|RSS / RSan / RSfd / RSlk / RSsh|常駐メモリ詳細|[[OS_メモリ管理.md]]|匿名・ファイル・ロック・共有メモリ区分|
|CODE / DATA|コード/データ領域|[[OS_メモリ管理.md]]|実行ファイルやスタックの領域|
|SWAP|スワップ領域|[[OS_メモリ管理.md]]|ページアウト領域の使用量|
|USED|使用メモリ合計|[[OS_メモリ管理.md]]|RES + SWAP の合計|
|%MEM|メモリ使用率|[[OS_メモリ管理.md]]|総メモリに対する使用割合|
|OOMa / OOMs|OOM調整値 / スコア|[[OS_メモリ管理.md]]|Out-of-Memory Killer の指標|
|vMj / vMn / nMaj / nMin|ページフォルト統計|[[OS_メモリ管理.md]]|Major / Minor フォルト数|
|nDRT|ダーティページ数|[[OS_メモリ管理.md]]|書き戻し待ちページの数|
|USS / PSS / PSan / PSfd / PSsh|メモリ使用詳細|[[OS_メモリ管理.md]]|Unique / Proportional メモリ利用情報|
|NU|NUMAノード使用|[[OS_NUMA管理.md]]|NUMA構成時のノード情報|
|ioR / ioRop / ioW / ioWop|I/O読み書きバイト・回数|[[OS_IOサブシステム.md]]|ディスクI/O統計（read/write）|
|ENVIRON|環境変数|[[OS_プロセス管理.md]]|プロセス起動時の環境設定情報|
|EXE|実行ファイルパス|[[OS_プロセス管理.md]]|実際のバイナリパス|
|LOGID|ログインユーザID|[[OS_権限管理.md]]|実際にログインしたユーザ識別|
|CGROUPS / CGNAME|コントロールグループ名|[[OS_cgroups.md]]|リソース制限・隔離識別子|
|AGID / AGNI|オートグループID / nice値|[[OS_スケジューラ.md]]|自動スケジューリンググループ情報|
|SUPGIDS / SUPGRPS|補助グループID / 名|[[OS_権限管理.md]]|プロセスの追加グループ権限|
|nsPID / nsNET / nsUTS / nsIPC / nsMNT / nsUSER / nsTIME / nsCGROUP|名前空間ID群|[[OS_名前空間.md]]|各NamespaceのInode参照|
|LXC|LXCコンテナ名|[[OS_コンテナ管理.md]]|プロセスが属するコンテナ名|

---
