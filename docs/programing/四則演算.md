# 四則演算 基本ガイド（Java / C# / Python / Rust）

数値演算の超入門。概念 → 各言語の最小パターン → 落とし穴まで。

---

## 1. 基本概念

* **加算（+）**：数を足す
* **減算（-）**：数を引く
* **乗算（\*）**：数を掛ける
* **除算（/）**：数を割る
* **剰余（%）**：割った余り
* **べき乗**：言語ごとに演算子や関数が異なる

---

## 2. 用語対応表

| 演算  | Java             | C# (.NET)        | Python   | Rust                  |
| --- | ---------------- | ---------------- | -------- | --------------------- |
| 加算  | `a + b`          | `a + b`          | `a + b`  | `a + b`               |
| 減算  | `a - b`          | `a - b`          | `a - b`  | `a - b`               |
| 乗算  | `a * b`          | `a * b`          | `a * b`  | `a * b`               |
| 除算  | `a / b`          | `a / b`          | `a / b`  | `a / b`               |
| 剰余  | `a % b`          | `a % b`          | `a % b`  | `a % b`               |
| べき乗 | `Math.pow(a, b)` | `Math.Pow(a, b)` | `a ** b` | `a.pow(b)` (`u32` 型等) |

---

## 3. 最小の使い方（クイックレシピ）

### Java

```java
int a = 5, b = 2;
System.out.println(a + b); // 7
System.out.println(a - b); // 3
System.out.println(a * b); // 10
System.out.println(a / b); // 2 （整数除算）
System.out.println(a % b); // 1
System.out.println(Math.pow(a, b)); // 25.0 （べき乗）
```

⚠ 整数同士の除算は小数点以下が切り捨てられる。

---

### C\#

```csharp
using System;

int a = 5, b = 2;
Console.WriteLine(a + b); // 7
Console.WriteLine(a - b); // 3
Console.WriteLine(a * b); // 10
Console.WriteLine(a / b); // 2 （整数除算）
Console.WriteLine(a % b); // 1
Console.WriteLine(Math.Pow(a, b)); // 25
```

⚠ `Math.Pow` は `double` を返す。整数べき乗は自作することも多い。

---

### Python

```python
a, b = 5, 2
print(a + b)  # 7
print(a - b)  # 3
print(a * b)  # 10
print(a / b)  # 2.5 （常に float 除算）
print(a // b) # 2   （整数除算）
print(a % b)  # 1
print(a ** b) # 25  （べき乗）
```

⚠ `/` は常に浮動小数点。整数除算は `//` を使う。

---

### Rust

```rust
fn main() {
    let a = 5;
    let b = 2;
    println!("{}", a + b); // 7
    println!("{}", a - b); // 3
    println!("{}", a * b); // 10
    println!("{}", a / b); // 2 （整数除算）
    println!("{}", a % b); // 1

    let x: u32 = 5;
    println!("{}", x.pow(2)); // 25 （べき乗）
}
```

⚠ `pow` は整数型・浮動小数型それぞれにメソッドがある。

---

## 4. よくあるタスク（共通イディオム）

* **累乗和**

  * Java: `for (int i=1;i<=n;i++) ans += Math.pow(i,3);`
  * C#: `Enumerable.Range(1,n).Sum(i => Math.Pow(i,3));`
  * Python: `sum(i**3 for i in range(1,n+1))`
  * Rust: `(1..=n).map(|i| i.pow(3)).sum::<u32>()`

* **交互符号付きの和**（例: `-1^i * i^3`）

  * Java: `ans += (i%2==0 ? 1 : -1) * (int)Math.pow(i,3);`
  * C#: `ans += (i%2==0 ? 1 : -1) * (int)Math.Pow(i,3);`
  * Python: `ans += (-1)**i * (i**3)`
  * Rust: `ans += if i%2==0 { i.pow(3) } else { -(i.pow(3) as i32) };`

---

## 5. よくある落とし穴

* **整数除算に注意**

  * Java / C# / Rust は整数 ÷ 整数は切り捨て。
  * Python だけ `/` が浮動小数点除算。

* **べき乗演算子の有無**

  * Java / C# は `Math.pow` 関数を使う。
  * Python は `**` 演算子。
  * Rust は `x.pow(n)` メソッド。

* **オーバーフロー**

  * Java `int` は 32bit → `2^31-1` を超えるとオーバーフロー。
  * C# `int` も同様。
  * Python は自動で多倍長整数。
  * Rust はデフォルトでオーバーフロー時にラップアラウンド（debug ビルドでは panic）。

---

## 6. 代表的パターン集

* **階乗 (n!)**

  * Java: `for (int i=1;i<=n;i++) ans *= i;`
  * Python: `math.prod(range(1,n+1))`

* **累乗の繰り返し二乗法**（高速べき乗）

  * Java: 自作 or BigInteger.pow
  * C#: 自作
  * Python: `pow(a, b, mod)` で O(log b) 計算
  * Rust: 自作 or `num::pow` クレート

---

### 参考命名

* 一般用途: `arithmetic_basics.md` / `four_ops_cheatsheet.md`
* 高速べき乗: `fast_exponentiation.md`

> 本資料は最小実例中心。整数除算とべき乗の扱いに各言語差が大きいので注意。
