# man.md

## 概要

このファイルは、`useless` スクリプトの「マニュアル調査」用メモである。スクリプトの実行方法、動作の解説、そして CTF の観点でフラグを探す際に有用なチェック項目とコマンドをまとめる。

---

## スクリプト実行に関する重要ポイント

* スクリプト先頭に `#!/bin/bash` がある場合、**bash で実行することが前提**である。
* `sh` コマンドで実行すると `/bin/sh`（多くの場合 dash）が使われ、`[[ ... ]]` 等の bash 固有構文が動作しないためエラーが出る。

### 推奨実行方法

```bash
# bash で明示的に実行
bash useless add 1 2

# 実行権限を付与して実行
chmod +x useless
./useless mul 5 5
```

---

## スクリプトの動作（要点）

* 引数がちょうど 3 個でないと `Read the code first` を出力する。
* 第1引数で演算の種類を判別する：`add`, `sub`, `div`, `mul`。
* 算術はシェルの算術展開 `$(( ... ))` を使っている。
* 該当しない操作指定の場合は `Read the manual` を出力する。

---

## "Read the manual" のヒント解釈

* スクリプト内にマニュアルやフラグのヒントを指す別ファイル（例: `manual`）が存在する可能性がある。
* 同じディレクトリに隠しファイルや別のスクリプトが置かれている場合がある（`Read the code first` も示唆している）。

---

## フラグ探索チェックリスト

1. カレントディレクトリの全ファイルを確認（隠しファイル含む）。
2. `manual` という名前のファイルやテキストを探す。
3. スクリプトの中身をじっくり読む（実行せずに内容を把握）。
4. 他のファイルやサブディレクトリに `pico` や `flag` という語がないか検索する。
5. 実行ファイルや権限の異なるファイルを確認（SUID など）。

---

## 便利なコマンド集（探索用）

```bash
# ディレクトリ一覧（隠しファイル含む）
ls -la

# 'manual' という名前のファイルを探す
ls -la | grep -i manual || true

# すべてのファイルから 'pico' や 'flag' を検索（再帰）
grep -Rni "pico\|flag" . ~ 2>/dev/null || true

# スクリプトの内容を行番号付きで確認
nl -ba useless | sed -n '1,200p'

# バイナリや混在文字列のチェック
strings useless | less

# 実行権限を付けて実行
chmod +x useless
./useless mul 5 5

# 疑わしいファイルを cat で読む
cat manual
cat README
```

---

## よくある落とし穴

* `sh useless ...` として実行すると構文エラーが発生する点に注意する。
* スクリプトを安易に実行するとファイル削除や外部通信を行うものもあるため、内容を読んで安全を確認してから実行する。

---
